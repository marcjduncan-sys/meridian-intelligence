<!DOCTYPE html>
<html>
<head>
  <title>PDF Test</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body>
  <h1>PDF Generation Test</h1>
  <button onclick="testPDF()">Generate Test PDF</button>

  <script>
  async function testPDF() {
    // Step 1: Create a div with HARD-CODED content
    var div = document.createElement('div');
    div.innerHTML =
      '<div style="font-family: Arial, sans-serif; padding: 40px; color: #333;">' +
        '<div style="font-size: 11px; letter-spacing: 3px; color: #1B2A4A; font-weight: bold;">' +
          'CONTINUUM INTELLIGENCE' +
        '</div>' +
        '<div style="font-size: 9px; color: #888; margin-bottom: 20px;">' +
          'Independent Cross-Domain Equity Research' +
        '</div>' +
        '<div style="border-top: 3px solid #1B2A4A; margin-bottom: 30px;"></div>' +

        '<h1 style="font-size: 28px; color: #1B2A4A; margin: 0 0 4px 0;">Woolworths Group</h1>' +
        '<div style="font-size: 14px; color: #666; margin-bottom: 24px;">WOW.AX &bull; ASX &bull; Consumer Staples</div>' +

        '<table style="width: 100%; border-collapse: collapse; margin-bottom: 24px;">' +
          '<tr style="background: #F2F2F2;">' +
            '<td style="padding: 8px; font-size: 11px; font-weight: bold;">Share Price</td>' +
            '<td style="padding: 8px; font-size: 11px;">A$31.94</td>' +
            '<td style="padding: 8px; font-size: 11px; font-weight: bold;">Risk Skew</td>' +
            '<td style="padding: 8px; font-size: 11px; color: #D50000;">DOWNSIDE</td>' +
          '</tr>' +
        '</table>' +

        '<h2 style="font-size: 16px; color: #2E5090; border-bottom: 2px solid #2E5090; padding-bottom: 6px;">' +
          'Competing Hypotheses' +
        '</h2>' +

        '<div style="margin: 12px 0; padding: 12px; background: #F0F7FF; border-left: 4px solid #00C853;">' +
          '<div style="font-size: 13px; font-weight: bold; color: #1B2A4A;">' +
            'T1: Turnaround <span style="float: right; color: #00C853; font-size: 18px;">36%</span>' +
          '</div>' +
          '<div style="font-size: 10px; color: #555; margin-top: 4px;">DOMINANT \u2014 Awaiting</div>' +
        '</div>' +

        '<div style="margin: 12px 0; padding: 12px; background: #FAFAFA; border-left: 4px solid #2979FF;">' +
          '<div style="font-size: 13px; font-weight: bold; color: #1B2A4A;">' +
            'T2: Erosion <span style="float: right; color: #2979FF; font-size: 18px;">25%</span>' +
          '</div>' +
          '<div style="font-size: 10px; color: #555; margin-top: 4px;">Rising</div>' +
        '</div>' +

        '<div style="margin: 12px 0; padding: 12px; background: #FAFAFA; border-left: 4px solid #FF9100;">' +
          '<div style="font-size: 13px; font-weight: bold; color: #1B2A4A;">' +
            'T3: Regulatory <span style="float: right; color: #FF9100; font-size: 18px;">21%</span>' +
          '</div>' +
          '<div style="font-size: 10px; color: #555; margin-top: 4px;">Rising</div>' +
        '</div>' +

        '<div style="margin: 12px 0; padding: 12px; background: #FAFAFA; border-left: 4px solid #D50000;">' +
          '<div style="font-size: 13px; font-weight: bold; color: #1B2A4A;">' +
            'T4: Disruption <span style="float: right; color: #D50000; font-size: 18px;">18%</span>' +
          '</div>' +
          '<div style="font-size: 10px; color: #555; margin-top: 4px;">Steady</div>' +
        '</div>' +

        '<div style="margin-top: 40px; border-top: 1px solid #ddd; padding-top: 12px; font-size: 8px; color: #999;">' +
          'This does not constitute personal financial advice. &copy; 2026 Continuum Intelligence' +
        '</div>' +
      '</div>';

    document.body.appendChild(div);

    try {
      await html2pdf()
        .set({
          margin: [15, 18, 15, 18],
          filename: 'TEST-pdf-works.pdf',
          image: { type: 'jpeg', quality: 0.98 },
          html2canvas: { scale: 2 },
          jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
        })
        .from(div)
        .save();

      alert('PDF generated! Check your downloads folder.');
    } catch (err) {
      alert('FAILED: ' + err.message);
      console.error(err);
    }

    document.body.removeChild(div);
  }
  </script>
</body>
</html>
